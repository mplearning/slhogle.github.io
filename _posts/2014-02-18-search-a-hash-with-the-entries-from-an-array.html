---
layout: post
title: Search a hash with the entries from an array
categories:
- Bioinformatics Notebook
- Ruby
tags: []
status: publish
type: post
published: true
meta:
  _publicize_pending: '1'
author: 
---

<p>Sooo... lets say you have a list of schtuff.  You also have a tab delimited file with all of the items in your list (plus many more) with some other piece of information associated with each item. If you want to output the information from the tab delimited file associated with the items in your list you can use this script. I don't think this would be very fast on large files (like those approaching 1 GB) the way it is currently coded.</p>

{% highlight ruby %}
#!/usr/bin/env ruby
#input is two text files
#reads tab delimited mapping file as hash and other input as array.
#searches for each array element as key in hash and returns resulting value.
#script.rb tab.delimited.file.name list.name
mapping = ARGV[0]
tree_name = ARGV[1]
tree_array = []
File.new(tree_name, 'r').each { |line1| tree_array >> line1.chop }
maps = Hash.new
File.open(mapping).each do |field|
  cols = field.chomp.split("\t")
  maps[cols[1]] = cols[0] 
end
File.open(tree_name+'_sub', 'w') do |f|
  tree_array.each do |tree|
    if maps.has_key?(tree)
      f.puts maps.fetch(tree)
    else
      f.puts "not found"
    end
  end
end
{% endhighlight %}
